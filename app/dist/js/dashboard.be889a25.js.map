{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.array.reverse.js","webpack:///./src/views/Dashboard.vue?28a3","webpack:///src/views/Dashboard.vue","webpack:///./src/views/Dashboard.vue?d766","webpack:///./src/views/Dashboard.vue","webpack:///./src/views/Dashboard.vue?dd60"],"names":["$","uncurryThis","isArray","un$Reverse","reverse","test","target","proto","forced","String","this","length","render","_vm","_h","$createElement","_c","_self","attrs","_v","on","$event","preventDefault","handleForm","apply","arguments","staticClass","style","previewImage","selectImage","ref","pickFile","directives","name","rawName","value","expression","domProps","composing","description","price","_m","withdrawFunds","_l","nft","key","itemData","image","_s","staticRenderFns","a","data","currentImage","web3","contract","account","created","getMetadata","window","ethereum","web3stuff","console","warn","computed","metaData","$store","state","methods","$refs","fileInput","click","event","files","file","reader","onload","readAsDataURL","$emit","formData","append","error","method","url","backendUrl","responseType","withCredentials","component"],"mappings":"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","file":"js/dashboard.be889a25.js","sourcesContent":["'use strict';\nvar $ = require('../internals/export');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar isArray = require('../internals/is-array');\n\nvar un$Reverse = uncurryThis([].reverse);\nvar test = [1, 2];\n\n// `Array.prototype.reverse` method\n// https://tc39.es/ecma262/#sec-array.prototype.reverse\n// fix for Safari 12.0 bug\n// https://bugs.webkit.org/show_bug.cgi?id=188794\n$({ target: 'Array', proto: true, forced: String(test) === String(test.reverse()) }, {\n  reverse: function reverse() {\n    // eslint-disable-next-line no-self-assign -- dirty hack\n    if (isArray(this)) this.length = this.length;\n    return un$Reverse(this);\n  }\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"dashboard\"}},[_c('h1',[_vm._v(\"This is your dashboard\")]),_c('section',{attrs:{\"id\":\"content\"}},[_c('div',[_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.handleForm.apply(null, arguments)}}},[_c('div',{staticClass:\"imagePreviewWrapper\",style:({ 'background-image': (\"url(\" + _vm.previewImage + \")\") }),on:{\"click\":_vm.selectImage}}),_c('input',{ref:\"fileInput\",attrs:{\"type\":\"file\"},on:{\"input\":_vm.pickFile}}),_c('label',[_vm._v(\"Name\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.name),expression:\"name\"}],attrs:{\"type\":\"text\",\"required\":\"\"},domProps:{\"value\":(_vm.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.name=$event.target.value}}}),_c('label',[_vm._v(\"Description\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.description),expression:\"description\"}],attrs:{\"type\":\"text\",\"required\":\"\"},domProps:{\"value\":(_vm.description)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.description=$event.target.value}}}),_c('label',[_vm._v(\"Price in Eth\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.price),expression:\"price\"}],attrs:{\"type\":\"number\",\"step\":\"any\",\"required\":\"\"},domProps:{\"value\":(_vm.price)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.price=$event.target.value}}}),_vm._m(0)]),_c('div',{staticClass:\"withdraw\"},[_c('button',{on:{\"click\":_vm.withdrawFunds}},[_vm._v(\"withdraw funds\")])])]),_c('div',{staticClass:\"images\"},_vm._l((_vm.metaData),function(nft){return _c('div',{key:nft.itemData.name,staticClass:\"image\"},[_c('img',{attrs:{\"src\":'data:image/png;base64,' + nft.itemData.image}}),_c('div',{staticClass:\"name\"},[_vm._v(\" \"+_vm._s(nft.itemData.name)+\" \")])])}),0)])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"submit\"},[_c('button',[_vm._v(\"Submit\")])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"dashboard\">\n    <h1>This is your dashboard</h1>\n    <section id=\"content\">\n      <div>\n        <form @submit.prevent=\"handleForm\">\n          <div\n            class=\"imagePreviewWrapper\"\n            :style=\"{ 'background-image': `url(${previewImage})` }\"\n            @click=\"selectImage\">\n          </div>\n          <!-- <label for=\"file\">Choose file to upload</label> -->\n          <input type=\"file\" ref=\"fileInput\" @input=\"pickFile\">\n          <label>Name</label>\n          <input type=\"text\" required v-model=\"name\">\n          <label>Description</label>\n          <input type=\"text\" required v-model=\"description\">\n          <label>Price in Eth</label>\n          <input type=\"number\" step=\"any\" required v-model=\"price\">\n          <div class=\"submit\">\n            <button>Submit</button>\n          </div>\n        </form>\n        <div class=\"withdraw\">\n          <button @click=\"withdrawFunds\">withdraw funds</button>\n        </div>\n      </div>\n      <div class=\"images\">\n        <div class=\"image\" v-for=\"nft in metaData\" :key=\"nft.itemData.name\">\n          <img v-bind:src=\"'data:image/png;base64,' + nft.itemData.image\" />\n          <div class=\"name\">\n            {{ nft.itemData.name }}\n          </div>\n        </div>\n      </div>\n    </section>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport Web3 from \"web3\";\nimport ezDropArtifact from \"../../../build/contracts/EZDrop.json\";\nimport ezDropArtifactRinkeby from \"../../contracts/ezDrop.json\";\n\nconst backendUrl = process.env.NODE_ENV === 'production' ? 'https://easydrop.herokuapp.com/' : process.env.VUE_APP_BACKEND_URL;\naxios.defaults.withCredentials = true;\n\nexport default {\n  data() {\n    return {\n      currentImage: null,\n      previewImage: null,\n      name: null,\n      description: null,\n      price: null,\n      web3: null,\n      contract: null,\n      account: null\n    }\n  },\n  created() {\n    this.getMetadata();\n    if (window.ethereum) {\n      const web3 = new Web3(window.ethereum);\n      this.web3 = web3;\n      this.web3stuff();\n    } else {\n      console.warn(\n        \"No web3 detected.\"\n      );\n    }\n  },\n  computed: {\n    metaData() {\n      return this.$store.state.metaData;\n    }\n  },\n  methods: {\n    selectImage () {\n      this.$refs.fileInput.click()\n    },\n    pickFile (event) {\n\n      this.currentImage = event.target.files[0]; // same as this.$refs.fileInput?\n\n      let input = this.$refs.fileInput\n      let file = input.files\n      if (file && file[0]) {\n        let reader = new FileReader\n        reader.onload = e => {\n          this.previewImage = e.target.result\n        }\n        reader.readAsDataURL(file[0])\n        this.$emit('input', file[0])\n      }\n    },\n    handleForm(event) {\n      const formData = new FormData();\n      formData.append('file', this.currentImage);\n      formData.append('name', this.name);\n      formData.append('description', this.description);\n      formData.append('price', this.price);\n      axios.post( `${backendUrl}upload`,\n        formData,\n        {\n          headers: {\n              'Content-Type': 'multipart/form-data'\n          }\n        }\n      ).\n      then( response => {\n        this.getMetadata();\n        this.previewImage = null;\n      })\n      .catch(function(error){\n        console.error('FAILURE!!', error);\n      });\n    },\n    getMetadata() {\n      axios({\n        method: 'get',\n        url: backendUrl,\n        responseType: 'text',\n        withCredentials: true\n      })\n      .then( response => {\n        this.$store.state.metaData = response.data.reverse();\n      }).catch(error => {\n        this.$router.push('login');\n      });\n    },\n    async web3stuff() {\n      const web3 = this.web3;\n      const networkId = await web3.eth.net.getId();\n      const deployedNetwork = ezDropArtifact.networks[networkId];\n      const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });\n\n      // if rinkeby\n      if (networkId == 4) {\n        this.contract = new web3.eth.Contract(\n          ezDropArtifactRinkeby,\n          '0x3240fAa0FD71868D18D1879EcdC5CE704949a741'\n        );\n      } else {\n        this.contract = new web3.eth.Contract(\n          ezDropArtifact.abi,\n          deployedNetwork.address\n        );\n      }\n\n      // console.log(this.contract);\n      this.account = accounts[0];\n    },\n    async withdrawFunds() {\n      console.log('withdrawing');\n\n      const { withdraw } = this.contract.methods;\n      \n      await withdraw()\n        .send({ from: this.account })\n        .on(\"receipt\", (receipt) => {\n          console.log(receipt);\n          // 'on' something else?\n        });\n\n    }\n  }\n}\n</script>\n\n<style scoped>\n#dashboard {\n  align-items: center;\n  display: flex;\n  flex-direction: column;\n  width: 90%;\n}\n\n#content {\n  display: flex;\n  width: 100%;\n}\n\n.images {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-evenly;\n  margin-left: 15px;\n  width: 100%;\n}\n\n.image {\n  border: 1px solid black;\n  height: 200px;\n  margin: 5px;\n  width: 200px;\n  padding: 10px;\n  position: relative;\n}\n\nimg {height: unset;}\n\n.imagePreviewWrapper {\n  border: 1px solid black;\n  width: 300px;\n  height: 300px;\n  margin: 10px 0;\n  background-size: cover;\n  background-position: center center;\n}\n.name {\n  position: absolute;\n  bottom: 5px;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Dashboard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Dashboard.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Dashboard.vue?vue&type=template&id=234ece2a&scoped=true&\"\nimport script from \"./Dashboard.vue?vue&type=script&lang=js&\"\nexport * from \"./Dashboard.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Dashboard.vue?vue&type=style&index=0&id=234ece2a&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"234ece2a\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Dashboard.vue?vue&type=style&index=0&id=234ece2a&scoped=true&lang=css&\""],"sourceRoot":""}
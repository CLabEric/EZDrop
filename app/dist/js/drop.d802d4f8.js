(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["drop"],{"0b05":function(t,e,a){},"1dde":function(t,e,a){var n=a("d039"),r=a("b622"),s=a("2d00"),i=r("species");t.exports=function(t){return s>=51||!n((function(){var e=[],a=e.constructor={};return a[i]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"357b":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"home"}},[a("div",{staticClass:"home"},[a("h1",[t._v(t._s(this.drop.name))])]),a("div",{staticClass:"gallery"},t._l(t.metaData,(function(e,n){return a("div",{key:e.itemData.name,staticClass:"piece"},[a("img",{attrs:{src:"data:image/png;base64,"+e.itemData.image}}),a("div",{staticClass:"wrapper"},[a("label",[t._v(t._s(e.itemData.name))]),a("div",{staticClass:"price"},[t._v(t._s(e.itemData.price)+" ETH "),a("span",{class:{sold:!e.itemData.txhash}},[t._v(" -"),a("b",[t._v(" SOLD")])])]),a("div",{staticClass:"transaction"},[a("button",{class:{sold:e.itemData.txhash},attrs:{"data-name":e.itemData.name,"data-description":e.itemData.description,"data-price":e.itemData.price,"data-image":e.itemData.image,"data-hash":e.itemData.txhash},on:{click:function(e){return t.mintNft(e,n)}}},[t._v("Mint ")]),a("a",{class:{sold:!e.itemData.txhash,hash:!0},attrs:{href:"https://rinkeby.etherscan.io/tx/"+e.itemData.txhash,target:"_blank"}},[t._v("See Transaction")])])])])})),0)])},r=[],s=a("f411"),i=s["a"],c=(a("78394"),a("2877")),o=Object(c["a"])(i,n,r,!1,null,null,null);e["default"]=o.exports},78394:function(t,e,a){"use strict";a("0b05")},8418:function(t,e,a){"use strict";var n=a("a04b"),r=a("9bf2"),s=a("5c6c");t.exports=function(t,e,a){var i=n(e);i in t?r.f(t,i,s(0,a)):t[i]=a}},"99af":function(t,e,a){"use strict";var n=a("23e7"),r=a("da84"),s=a("d039"),i=a("e8b5"),c=a("861d"),o=a("7b0b"),u=a("07fa"),d=a("8418"),h=a("65f0"),f=a("1dde"),m=a("b622"),p=a("2d00"),l=m("isConcatSpreadable"),b=9007199254740991,w="Maximum allowed index exceeded",v=r.TypeError,g=p>=51||!s((function(){var t=[];return t[l]=!1,t.concat()[0]!==t})),x=f("concat"),D=function(t){if(!c(t))return!1;var e=t[l];return void 0!==e?!!e:i(t)},_=!g||!x;n({target:"Array",proto:!0,forced:_},{concat:function(t){var e,a,n,r,s,i=o(this),c=h(i,0),f=0;for(e=-1,n=arguments.length;e<n;e++)if(s=-1===e?i:arguments[e],D(s)){if(r=u(s),f+r>b)throw v(w);for(a=0;a<r;a++,f++)a in s&&d(c,f,s[a])}else{if(f>=b)throw v(w);d(c,f++,s)}return c.length=f,c}})},f411:function(t,e,a){"use strict";(function(t){var n=a("1da1"),r=(a("96cf"),a("d3b7"),a("99af"),a("b0c0"),a("a4d3"),a("e01a"),a("e9c4"),a("e25e"),a("bc3a")),s=a.n(r),i=a("99e5"),c=a.n(i),o=a("fb08"),u=a("218b"),d=a("7384"),h="https://easydrop.herokuapp.com/";e["a"]={name:"Home",data:function(){return{drop:this.$route.params.drop,web3:null,contract:null,account:null}},created:function(){if(this.getMetadata(),window.ethereum){var t=new c.a(window.ethereum);this.web3=t,this.web3stuff()}else console.warn("No web3 detected.")},computed:{metaData:function(){return this.$store.state.metaData}},methods:{getMetadata:function(){var t=this;s()({method:"get",url:"".concat(h).concat(this.drop),responseType:"text"}).then((function(e){t.$store.state.metaData=e.data}))},web3stuff:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,n,r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.web3,e.next=3,a.eth.net.getId();case 3:return n=e.sent,r=u.networks[n],e.next=7,window.ethereum.request({method:"eth_requestAccounts"});case 7:s=e.sent,4==n?t.contract=new a.eth.Contract(d,"0xAA8Ac4e956508708218B6c01f21781873421533c"):r&&(t.contract=new a.eth.Contract(u.abi,r.address)),t.account=s[0];case 10:case"end":return e.stop()}}),e)})))()},mintNft:function(e,a){var r=this;return Object(n["a"])(regeneratorRuntime.mark((function n(){var s,i,u,d,h,f,m;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=r.contract.methods.mint,i=Object(o["create"])("https://ipfs.infura.io:5001"),u=c.a.utils.toWei(e.target.dataset.price,"ether"),d=new t.from(e.target.dataset.image,"base64"),n.next=6,i.add(d);case 6:return h=n.sent,f={name:e.target.dataset.name,description:e.target.dataset.description,image:"https://ipfs.io/ipfs/"+h.path},n.next=10,i.add(JSON.stringify(f));case 10:return m=n.sent,n.next=13,s(m.path).send({from:r.account,value:parseInt(u)}).on("receipt",(function(t){r.metaData[a].itemData.txhash=t.transactionHash,r.setTxHash(r.metaData[a]._id,r.metaData[a].itemData.txhash)}));case 13:case"end":return n.stop()}}),n)})))()},setTxHash:function(t,e){return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:s.a.post("".concat(h,"setHash"),{id:t,txHash:e}).then((function(t){1===t.data.ok&&console.log("db updated with tx hash")}))["catch"]((function(t){console.error("FAILURE!!",t)}));case 1:case"end":return a.stop()}}),a)})))()}}}}).call(this,a("1c35").Buffer)}}]);
//# sourceMappingURL=drop.d802d4f8.js.map
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["dashboard"],{"0685":function(e,t,n){},"26e9":function(e,t,n){"use strict";var a=n("23e7"),r=n("e330"),i=n("e8b5"),s=r([].reverse),o=[1,2];a({target:"Array",proto:!0,forced:String(o)===String(o.reverse())},{reverse:function(){return i(this)&&(this.length=this.length),s(this)}})},5960:function(e,t,n){"use strict";n("0685")},7277:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"dashboard"}},[n("h1",[e._v("This is your dashboard")]),n("section",{attrs:{id:"content"}},[n("div",[n("form",{on:{submit:function(t){return t.preventDefault(),e.handleForm.apply(null,arguments)}}},[n("div",{staticClass:"imagePreviewWrapper",style:{"background-image":"url("+e.previewImage+")"},on:{click:e.selectImage}}),n("input",{ref:"fileInput",attrs:{type:"file"},on:{input:e.pickFile}}),n("label",[e._v("Name")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],attrs:{type:"text",required:""},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}}),n("label",[e._v("Description")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.description,expression:"description"}],attrs:{type:"text",required:""},domProps:{value:e.description},on:{input:function(t){t.target.composing||(e.description=t.target.value)}}}),n("label",[e._v("Price in Eth")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.price,expression:"price"}],attrs:{type:"number",step:"any",required:""},domProps:{value:e.price},on:{input:function(t){t.target.composing||(e.price=t.target.value)}}}),e._m(0)]),n("div",{staticClass:"withdraw"},[n("button",{on:{click:e.withdrawFunds}},[e._v("withdraw funds")])])]),n("div",{staticClass:"images"},e._l(e.metaData,(function(t){return n("div",{key:t.itemData.name,staticClass:"image"},[n("img",{attrs:{src:"data:image/png;base64,"+t.itemData.image}}),n("div",{staticClass:"name"},[e._v(" "+e._s(t.itemData.name)+" ")])])})),0)])])},r=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"submit"},[n("button",[e._v("Submit")])])}],i=n("1da1"),s=(n("96cf"),n("b0c0"),n("a4d3"),n("e01a"),n("26e9"),n("bc3a")),o=n.n(s),c=n("99e5"),u=n.n(c),l=n("218b");o.a.defaults.withCredentials=!0;var d={data:function(){return{currentImage:null,previewImage:null,name:null,description:null,price:null,web3:null,contract:null,account:null}},created:function(){if(this.getMetadata(),window.ethereum){var e=new u.a(window.ethereum);this.web3=e,this.web3stuff()}else console.warn("No web3 detected.")},computed:{metaData:function(){return this.$store.state.metaData}},methods:{selectImage:function(){this.$refs.fileInput.click()},pickFile:function(e){var t=this;this.currentImage=e.target.files[0];var n=this.$refs.fileInput,a=n.files;if(a&&a[0]){var r=new FileReader;r.onload=function(e){t.previewImage=e.target.result},r.readAsDataURL(a[0]),this.$emit("input",a[0])}},handleForm:function(e){var t=this,n=new FormData;n.append("file",this.currentImage),n.append("name",this.name),n.append("description",this.description),n.append("price",this.price),o.a.post("".concat(Object({NODE_ENV:"production",VUE_APP_BACKEND_URL:"http://localhost:3000/",BASE_URL:"/EZDrop/"}).BACKEND_URL,"upload"),n,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){t.getMetadata(),t.previewImage=null}))["catch"]((function(e){console.error("FAILURE!!",e)}))},getMetadata:function(){var e=this;o()({method:"get",url:"".concat(Object({NODE_ENV:"production",VUE_APP_BACKEND_URL:"http://localhost:3000/",BASE_URL:"/EZDrop/"}).BACKEND_URL,"dashboard"),responseType:"text",withCredentials:!0}).then((function(t){e.$store.state.metaData=t.data.reverse()}))["catch"]((function(t){e.$router.push("login")}))},web3stuff:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,a,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.web3,t.next=3,n.eth.net.getId();case 3:return a=t.sent,r=l.networks[a],t.next=7,window.ethereum.request({method:"eth_requestAccounts"});case 7:i=t.sent,e.contract=new n.eth.Contract(l.abi,r.address),e.account=i[0];case 10:case"end":return t.stop()}}),t)})))()},withdrawFunds:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("withdrawing"),n=e.contract.methods.withdraw,t.next=4,n().send({from:e.account}).on("receipt",(function(e){console.log(e)}));case 4:case"end":return t.stop()}}),t)})))()}}},p=d,m=(n("5960"),n("2877")),h=Object(m["a"])(p,a,r,!1,null,"6960eaee",null);t["default"]=h.exports}}]);
//# sourceMappingURL=dashboard.3c1fdea1.js.map
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["dashboard"],{"0cb2":function(e,t,n){var r=n("e330"),a=n("7b0b"),i=Math.floor,o=r("".charAt),c=r("".replace),s=r("".slice),u=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,d=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,r,l,p){var f=n+e.length,v=r.length,m=d;return void 0!==l&&(l=a(l),m=u),c(p,m,(function(a,c){var u;switch(o(c,0)){case"$":return"$";case"&":return e;case"`":return s(t,0,n);case"'":return s(t,f);case"<":u=l[s(c,1,-1)];break;default:var d=+c;if(0===d)return a;if(d>v){var p=i(d/10);return 0===p?a:p<=v?void 0===r[p-1]?o(c,1):r[p-1]+o(c,1):a}u=r[d-1]}return void 0===u?"":u}))}},"107c":function(e,t,n){var r=n("d039"),a=n("da84"),i=a.RegExp;e.exports=r((function(){var e=i("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},"14c3":function(e,t,n){var r=n("da84"),a=n("c65b"),i=n("825a"),o=n("1626"),c=n("c6b6"),s=n("9263"),u=r.TypeError;e.exports=function(e,t){var n=e.exec;if(o(n)){var r=a(n,e,t);return null!==r&&i(r),r}if("RegExp"===c(e))return a(s,e,t);throw u("RegExp#exec called on incompatible receiver")}},"26e9":function(e,t,n){"use strict";var r=n("23e7"),a=n("e330"),i=n("e8b5"),o=a([].reverse),c=[1,2];r({target:"Array",proto:!0,forced:String(c)===String(c.reverse())},{reverse:function(){return i(this)&&(this.length=this.length),o(this)}})},5319:function(e,t,n){"use strict";var r=n("2ba4"),a=n("c65b"),i=n("e330"),o=n("d784"),c=n("d039"),s=n("825a"),u=n("1626"),d=n("5926"),l=n("50c4"),p=n("577e"),f=n("1d80"),v=n("8aa5"),m=n("dc4a"),g=n("0cb2"),h=n("14c3"),x=n("b622"),b=x("replace"),w=Math.max,I=Math.min,_=i([].concat),y=i([].push),$=i("".indexOf),E=i("".slice),R=function(e){return void 0===e?e:String(e)},C=function(){return"$0"==="a".replace(/./,"$0")}(),N=function(){return!!/./[b]&&""===/./[b]("a","$0")}(),k=!c((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));o("replace",(function(e,t,n){var i=N?"$":"$0";return[function(e,n){var r=f(this),i=void 0==e?void 0:m(e,b);return i?a(i,e,r,n):a(t,p(r),e,n)},function(e,a){var o=s(this),c=p(e);if("string"==typeof a&&-1===$(a,i)&&-1===$(a,"$<")){var f=n(t,o,c,a);if(f.done)return f.value}var m=u(a);m||(a=p(a));var x=o.global;if(x){var b=o.unicode;o.lastIndex=0}var C=[];while(1){var N=h(o,c);if(null===N)break;if(y(C,N),!x)break;var k=p(N[0]);""===k&&(o.lastIndex=v(c,l(o.lastIndex),b))}for(var D="",A=0,P=0;P<C.length;P++){N=C[P];for(var O=p(N[0]),S=w(I(d(N.index),c.length),0),F=[],T=1;T<N.length;T++)y(F,R(N[T]));var U=N.groups;if(m){var q=_([O],F,S,c);void 0!==U&&y(q,U);var M=p(r(a,void 0,q))}else M=g(O,c,S,F,U,a);S>=A&&(D+=E(c,A,S)+M,A=S+O.length)}return D+E(c,A)}]}),!k||!C||N)},"5e05":function(e,t,n){},7277:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"dashboard"}},[n("h1",[e._v(e._s(e.dropName)+" dashboard")]),n("section",{attrs:{id:"content"}},[n("div",[e.dropId?n("div",[n("form",{on:{submit:function(t){return t.preventDefault(),e.addPiece.apply(null,arguments)}}},[n("div",{staticClass:"imagePreviewWrapper",style:{"background-image":"url("+e.previewImage+")"},on:{click:e.selectImage}}),n("input",{ref:"fileInput",attrs:{type:"file"},on:{input:e.pickFile}}),n("label",[e._v("Name")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],attrs:{type:"text",required:""},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}}),n("label",[e._v("Description")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.description,expression:"description"}],attrs:{type:"text",required:""},domProps:{value:e.description},on:{input:function(t){t.target.composing||(e.description=t.target.value)}}}),n("label",[e._v("Price in Eth")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.price,expression:"price"}],attrs:{type:"number",step:"any",required:""},domProps:{value:e.price},on:{input:function(t){t.target.composing||(e.price=t.target.value)}}}),e._m(0)])]):e._e(),e.dropId?n("div",{staticClass:"withdraw"},[n("button",{on:{click:e.withdrawFunds}},[e._v("withdraw funds")])]):e._e(),e.dropId?e._e():n("div",[e._m(1),n("form",{on:{submit:function(t){return t.preventDefault(),e.createDrop.apply(null,arguments)}}},[n("label",[e._v("Name")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.dropName,expression:"dropName"}],attrs:{type:"text",required:""},domProps:{value:e.dropName},on:{input:function(t){t.target.composing||(e.dropName=t.target.value)}}}),e._m(2)])])]),n("div",{staticClass:"images"},e._l(e.metaData,(function(t){return n("div",{key:t.itemData.name,staticClass:"image"},[n("img",{attrs:{src:"data:image/png;base64,"+t.itemData.image}}),n("div",{staticClass:"name"},[e._v(" "+e._s(t.itemData.name)+" ")])])})),0)])])},a=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"submit"},[n("button",[e._v("Submit")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"drop"},[n("h1",[e._v("Create your Drop")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"submit"},[n("button",[e._v("Submit")])])}],i=n("1da1"),o=(n("96cf"),n("b0c0"),n("a4d3"),n("e01a"),n("ac1f"),n("5319"),n("26e9"),n("d3b7"),n("bc3a")),c=n.n(o),s=n("99e5"),u=n.n(s),d=n("218b"),l=n("7384"),p="https://easydrop.herokuapp.com/";c.a.defaults.withCredentials=!0;var f={data:function(){return{dropId:null,dropName:null,currentImage:null,previewImage:null,name:null,description:null,price:null,web3:null,contract:null,account:null}},created:function(){if(this.getMetadata(),window.ethereum){var e=new u.a(window.ethereum);this.web3=e,this.web3stuff()}else console.warn("No web3 detected.")},computed:{metaData:function(){return this.$store.state.metaData}},methods:{selectImage:function(){this.$refs.fileInput.click()},pickFile:function(e){var t=this;this.currentImage=e.target.files[0];var n=this.$refs.fileInput,r=n.files;if(r&&r[0]){var a=new FileReader;a.onload=function(e){t.previewImage=e.target.result},a.readAsDataURL(r[0]),this.$emit("input",r[0])}},addPiece:function(e){var t=this,n=new FormData;n.append("file",this.currentImage),n.append("name",this.name),n.append("description",this.description),n.append("price",this.price),n.append("dropId",this.dropId),c.a.post("".concat(p,"upload"),n,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){t.getMetadata(),t.previewImage=null}))["catch"]((function(e){console.error("FAILURE!!",e)}))},createDrop:function(e){var t=this,n=this.dropName,r=n.replace(/'/g,"").replace(/\s/g,"-").toLowerCase();c.a.post("".concat(p,"create-drop"),{name:n,urlParam:r}).then((function(e){t.dropId=e.data._id}))["catch"]((function(e){return console.error("FAILURE!!",e)}))},getMetadata:function(){var e=this;c()({method:"get",url:"".concat(p,"dashboard"),responseType:"text",withCredentials:!0}).then((function(t){console.log(t),"empty"===t.data?console.log("no drops for this user yet"):(e.$store.state.metaData=t.data.nfts.reverse(),e.dropId=t.data.drop.id,e.dropName=t.data.drop.name,e.$store.state.loggedIn=!0)}))["catch"]((function(e){console.log(e)}))},web3stuff:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.web3,t.next=3,n.eth.net.getId();case 3:return r=t.sent,a=d.networks[r],t.next=7,window.ethereum.request({method:"eth_requestAccounts"});case 7:i=t.sent,e.contract=4==r?new n.eth.Contract(l,"0x253307D78eA869f60C32d1d2eeb6753aB6fb7643"):new n.eth.Contract(d.abi,a.address),e.account=i[0];case 10:case"end":return t.stop()}}),t)})))()},withdrawFunds:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("withdrawing"),n=e.contract.methods.withdraw,t.next=4,n().send({from:e.account}).on("receipt",(function(e){console.log(e)}));case 4:case"end":return t.stop()}}),t)})))()}}},v=f,m=(n("ca4d"),n("2877")),g=Object(m["a"])(v,r,a,!1,null,"1cc8f7b0",null);t["default"]=g.exports},"8aa5":function(e,t,n){"use strict";var r=n("6547").charAt;e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},9263:function(e,t,n){"use strict";var r=n("c65b"),a=n("e330"),i=n("577e"),o=n("ad6d"),c=n("9f7f"),s=n("5692"),u=n("7c73"),d=n("69f3").get,l=n("fce3"),p=n("107c"),f=s("native-string-replace",String.prototype.replace),v=RegExp.prototype.exec,m=v,g=a("".charAt),h=a("".indexOf),x=a("".replace),b=a("".slice),w=function(){var e=/a/,t=/b*/g;return r(v,e,"a"),r(v,t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),I=c.UNSUPPORTED_Y||c.BROKEN_CARET,_=void 0!==/()??/.exec("")[1],y=w||_||I||l||p;y&&(m=function(e){var t,n,a,c,s,l,p,y=this,$=d(y),E=i(e),R=$.raw;if(R)return R.lastIndex=y.lastIndex,t=r(m,R,E),y.lastIndex=R.lastIndex,t;var C=$.groups,N=I&&y.sticky,k=r(o,y),D=y.source,A=0,P=E;if(N&&(k=x(k,"y",""),-1===h(k,"g")&&(k+="g"),P=b(E,y.lastIndex),y.lastIndex>0&&(!y.multiline||y.multiline&&"\n"!==g(E,y.lastIndex-1))&&(D="(?: "+D+")",P=" "+P,A++),n=new RegExp("^(?:"+D+")",k)),_&&(n=new RegExp("^"+D+"$(?!\\s)",k)),w&&(a=y.lastIndex),c=r(v,N?n:y,P),N?c?(c.input=b(c.input,A),c[0]=b(c[0],A),c.index=y.lastIndex,y.lastIndex+=c[0].length):y.lastIndex=0:w&&c&&(y.lastIndex=y.global?c.index+c[0].length:a),_&&c&&c.length>1&&r(f,c[0],n,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(c[s]=void 0)})),c&&C)for(c.groups=l=u(null),s=0;s<C.length;s++)p=C[s],l[p[0]]=c[p[1]];return c}),e.exports=m},"9f7f":function(e,t,n){var r=n("d039"),a=n("da84"),i=a.RegExp;t.UNSUPPORTED_Y=r((function(){var e=i("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=r((function(){var e=i("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},ac1f:function(e,t,n){"use strict";var r=n("23e7"),a=n("9263");r({target:"RegExp",proto:!0,forced:/./.exec!==a},{exec:a})},ad6d:function(e,t,n){"use strict";var r=n("825a");e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},ca4d:function(e,t,n){"use strict";n("5e05")},d784:function(e,t,n){"use strict";n("ac1f");var r=n("e330"),a=n("6eeb"),i=n("9263"),o=n("d039"),c=n("b622"),s=n("9112"),u=c("species"),d=RegExp.prototype;e.exports=function(e,t,n,l){var p=c(e),f=!o((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),v=f&&!o((function(){var t=!1,n=/a/;return"split"===e&&(n={},n.constructor={},n.constructor[u]=function(){return n},n.flags="",n[p]=/./[p]),n.exec=function(){return t=!0,null},n[p](""),!t}));if(!f||!v||n){var m=r(/./[p]),g=t(p,""[e],(function(e,t,n,a,o){var c=r(e),s=t.exec;return s===i||s===d.exec?f&&!o?{done:!0,value:m(t,n,a)}:{done:!0,value:c(n,t,a)}:{done:!1}}));a(String.prototype,e,g[0]),a(d,p,g[1])}l&&s(d[p],"sham",!0)}},fce3:function(e,t,n){var r=n("d039"),a=n("da84"),i=a.RegExp;e.exports=r((function(){var e=i(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))}}]);
//# sourceMappingURL=dashboard.de4f7bb6.js.map
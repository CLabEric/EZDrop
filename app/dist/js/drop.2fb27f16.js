(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["drop"],{"0b05":function(t,e,a){},"159b":function(t,e,a){var n=a("da84"),r=a("fdbc"),i=a("785a"),s=a("17c2"),c=a("9112"),o=function(t){if(t&&t.forEach!==s)try{c(t,"forEach",s)}catch(e){t.forEach=s}};for(var u in r)r[u]&&o(n[u]&&n[u].prototype);o(i)},"17c2":function(t,e,a){"use strict";var n=a("b727").forEach,r=a("a640"),i=r("forEach");t.exports=i?[].forEach:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}},"1dde":function(t,e,a){var n=a("d039"),r=a("b622"),i=a("2d00"),s=r("species");t.exports=function(t){return i>=51||!n((function(){var e=[],a=e.constructor={};return a[s]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"357b":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"home"}},[a("div",{staticClass:"home"},[a("h1",[t._v(t._s(this.drop.name))])]),a("div",{staticClass:"gallery"},t._l(t.metaData,(function(e,n){return a("div",{key:e.itemData.name,staticClass:"piece"},[a("img",{attrs:{src:"data:image/png;base64,"+e.itemData.image}}),a("div",{staticClass:"wrapper"},[a("label",[t._v(t._s(e.itemData.name))]),a("div",{staticClass:"price"},[t._v(t._s(e.itemData.price)+" ETH "),a("span",{class:{sold:!e.itemData.txhash}},[t._v(" -"),a("b",[t._v(" SOLD")])])]),a("div",{staticClass:"transaction"},[a("button",{class:{sold:e.itemData.txhash},attrs:{"data-name":e.itemData.name,"data-description":e.itemData.description,"data-price":e.itemData.price,"data-attributes":JSON.stringify(e.itemData.attributes),"data-image":e.itemData.image,"data-hash":e.itemData.txhash},on:{click:function(e){return t.mintNft(e,n)}}},[t._v("Mint ")]),t._v(" "+t._s(typeof e.itemData.attributes)+" "),a("a",{class:{sold:!e.itemData.txhash,hash:!0},attrs:{href:"https://rinkeby.etherscan.io/tx/"+e.itemData.txhash,target:"_blank"}},[t._v("See Transaction")])])])])})),0)])},r=[],i=a("f411"),s=i["a"],c=(a("78394"),a("2877")),o=Object(c["a"])(s,n,r,!1,null,null,null);e["default"]=o.exports},4160:function(t,e,a){"use strict";var n=a("23e7"),r=a("17c2");n({target:"Array",proto:!0,forced:[].forEach!=r},{forEach:r})},78394:function(t,e,a){"use strict";a("0b05")},"99af":function(t,e,a){"use strict";var n=a("23e7"),r=a("da84"),i=a("d039"),s=a("e8b5"),c=a("861d"),o=a("7b0b"),u=a("07fa"),f=a("8418"),d=a("65f0"),h=a("1dde"),m=a("b622"),p=a("2d00"),l=m("isConcatSpreadable"),b=9007199254740991,v="Maximum allowed index exceeded",w=r.TypeError,g=p>=51||!i((function(){var t=[];return t[l]=!1,t.concat()[0]!==t})),x=h("concat"),D=function(t){if(!c(t))return!1;var e=t[l];return void 0!==e?!!e:s(t)},_=!g||!x;n({target:"Array",proto:!0,forced:_},{concat:function(t){var e,a,n,r,i,s=o(this),c=d(s,0),h=0;for(e=-1,n=arguments.length;e<n;e++)if(i=-1===e?s:arguments[e],D(i)){if(r=u(i),h+r>b)throw w(v);for(a=0;a<r;a++,h++)a in i&&f(c,h,i[a])}else{if(h>=b)throw w(v);f(c,h++,i)}return c.length=h,c}})},a640:function(t,e,a){"use strict";var n=a("d039");t.exports=function(t,e){var a=[][t];return!!a&&n((function(){a.call(null,e||function(){throw 1},1)}))}},f411:function(t,e,a){"use strict";(function(t){var n=a("1da1"),r=(a("96cf"),a("d3b7"),a("99af"),a("b0c0"),a("a4d3"),a("e01a"),a("4160"),a("159b"),a("e9c4"),a("e25e"),a("bc3a")),i=a.n(r),s=a("99e5"),c=a.n(s),o=a("fb08"),u=a("218b"),f=a("7384"),d="https://easydrop.herokuapp.com/";e["a"]={name:"Home",data:function(){return{drop:this.$route.params.drop,web3:null,contract:null,account:null}},created:function(){if(this.getMetadata(),window.ethereum){var t=new c.a(window.ethereum);this.web3=t,this.web3stuff()}else console.warn("No web3 detected.")},computed:{metaData:function(){return this.$store.state.metaData}},methods:{getMetadata:function(){var t=this;i()({method:"get",url:"".concat(d).concat(this.drop),responseType:"text"}).then((function(e){t.$store.state.metaData=e.data,console.log(t.$store.state.metaData)}))},web3stuff:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.web3,e.next=3,a.eth.net.getId();case 3:return n=e.sent,r=u.networks[n],e.next=7,window.ethereum.request({method:"eth_requestAccounts"});case 7:i=e.sent,4==n?t.contract=new a.eth.Contract(f,"0x253307D78eA869f60C32d1d2eeb6753aB6fb7643"):r&&(t.contract=new a.eth.Contract(u.abi,r.address)),t.account=i[0];case 10:case"end":return e.stop()}}),e)})))()},mintNft:function(e,a){var r=this;return Object(n["a"])(regeneratorRuntime.mark((function n(){var i,s,u,f,d,h,m,p;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=r.contract.methods.mint,s=Object(o["create"])("https://ipfs.infura.io:5001"),u=c.a.utils.toWei(e.target.dataset.price,"ether"),f=new t.from(e.target.dataset.image,"base64"),n.next=6,s.add(f);case 6:return d=n.sent,h={},m={name:e.target.dataset.name,description:e.target.dataset.description,image:"https://ipfs.io/ipfs/"+d.path},JSON.parse(e.target.dataset.attributes).forEach((function(t){h[t.trait_type]=t.value})),m["attributes"]=h,n.next=13,s.add(JSON.stringify(m));case 13:return p=n.sent,n.next=16,i(p.path).send({from:r.account,value:parseInt(u)}).on("receipt",(function(t){r.metaData[a].itemData.txhash=t.transactionHash,r.setTxHash(r.metaData[a]._id,r.metaData[a].itemData.txhash)}));case 16:case"end":return n.stop()}}),n)})))()},setTxHash:function(t,e){return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:i.a.post("".concat(d,"setHash"),{id:t,txHash:e}).then((function(t){1===t.data.ok&&console.log("db updated with tx hash")}))["catch"]((function(t){console.error("FAILURE!!",t)}));case 1:case"end":return a.stop()}}),a)})))()}}}}).call(this,a("1c35").Buffer)}}]);
//# sourceMappingURL=drop.2fb27f16.js.map
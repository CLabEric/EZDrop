(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["drop"],{"0b05":function(t,e,a){},"159b":function(t,e,a){var n=a("da84"),r=a("fdbc"),c=a("785a"),o=a("17c2"),s=a("9112"),i=function(t){if(t&&t.forEach!==o)try{s(t,"forEach",o)}catch(e){t.forEach=o}};for(var u in r)r[u]&&i(n[u]&&n[u].prototype);i(c)},"17c2":function(t,e,a){"use strict";var n=a("b727").forEach,r=a("a640"),c=r("forEach");t.exports=c?[].forEach:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}},"1dde":function(t,e,a){var n=a("d039"),r=a("b622"),c=a("2d00"),o=r("species");t.exports=function(t){return c>=51||!n((function(){var e=[],a=e.constructor={};return a[o]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"357b":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"drop"}},[a("div",{staticClass:"home"},[a("h1",[t._v("welcome to: "+t._s(this.drop.name))]),a("div",{attrs:{id:"walletConnect"}},[t.web3?a("button",{attrs:{disabled:t.disabled},on:{click:function(e){return t.connectToNetwork()}}},[t._v("connect")]):t._e(),t._v(" Â  "),a("p",{class:[t.account?"walletConnect-connected":"walletConnect-blocked"]},[t._v(t._s(t.connectionMessage))])])]),a("div",{staticClass:"gallery"},t._l(t.metaData,(function(e,n){return a("div",{key:e.itemData.name,staticClass:"piece"},[a("img",{attrs:{src:"data:image/png;base64,"+e.itemData.image}}),a("div",{staticClass:"wrapper"},[a("label",[t._v(t._s(e.itemData.name))]),a("div",{staticClass:"price"},[t._v(t._s(e.itemData.price)+" ETH "),a("span",{class:{sold:!e.itemData.txhash}},[t._v(" -"),a("b",[t._v(" SOLD")])])]),a("div",{staticClass:"transaction"},[a("button",{class:{sold:e.itemData.txhash},attrs:{"data-name":e.itemData.name,"data-description":e.itemData.description,"data-price":e.itemData.price,"data-attributes":JSON.stringify(e.itemData.attributes),"data-image":e.itemData.image,"data-hash":e.itemData.txhash},on:{click:function(e){return t.mintNft(e,n)}}},[t._v("Mint ")]),t._v(" "+t._s(typeof e.itemData.attributes)+" "),a("a",{class:{sold:!e.itemData.txhash,hash:!0},attrs:{href:"https://rinkeby.etherscan.io/tx/"+e.itemData.txhash,target:"_blank"}},[t._v("See Transaction")])])])])})),0)])},r=[],c=a("f411"),o=c["a"],s=(a("78394"),a("2877")),i=Object(s["a"])(o,n,r,!1,null,null,null);e["default"]=i.exports},4160:function(t,e,a){"use strict";var n=a("23e7"),r=a("17c2");n({target:"Array",proto:!0,forced:[].forEach!=r},{forEach:r})},78394:function(t,e,a){"use strict";a("0b05")},"99af":function(t,e,a){"use strict";var n=a("23e7"),r=a("da84"),c=a("d039"),o=a("e8b5"),s=a("861d"),i=a("7b0b"),u=a("07fa"),d=a("8418"),f=a("65f0"),h=a("1dde"),l=a("b622"),m=a("2d00"),p=l("isConcatSpreadable"),b=9007199254740991,v="Maximum allowed index exceeded",w=r.TypeError,g=m>=51||!c((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),x=h("concat"),k=function(t){if(!s(t))return!1;var e=t[p];return void 0!==e?!!e:o(t)},D=!g||!x;n({target:"Array",proto:!0,forced:D},{concat:function(t){var e,a,n,r,c,o=i(this),s=f(o,0),h=0;for(e=-1,n=arguments.length;e<n;e++)if(c=-1===e?o:arguments[e],k(c)){if(r=u(c),h+r>b)throw w(v);for(a=0;a<r;a++,h++)a in c&&d(s,h,c[a])}else{if(h>=b)throw w(v);d(s,h++,c)}return s.length=h,s}})},a640:function(t,e,a){"use strict";var n=a("d039");t.exports=function(t,e){var a=[][t];return!!a&&n((function(){a.call(null,e||function(){throw 1},1)}))}},f411:function(t,e,a){"use strict";(function(t){var n=a("1da1"),r=(a("96cf"),a("d3b7"),a("99af"),a("b0c0"),a("a4d3"),a("e01a"),a("4160"),a("159b"),a("e9c4"),a("e25e"),a("bc3a")),c=a.n(r),o=a("99e5"),s=a.n(o),i=a("fb08"),u=a("218b"),d=a("7384"),f="https://easydrop.herokuapp.com/";e["a"]={name:"Home",data:function(){return{drop:this.$route.params.drop,web3:null,contract:null,account:null,connectionMessage:"please connect your wallet",disabled:!1}},created:function(){if(this.getMetadata(),window.ethereum){var t=new s.a(window.ethereum);this.web3=t}else console.warn("No web3 detected."),this.connectionMessage="please install metamask"},computed:{metaData:function(){return this.$store.state.metaData}},methods:{getMetadata:function(){var t=this;c()({method:"get",url:"".concat(f).concat(this.drop),responseType:"text"}).then((function(e){t.$store.state.metaData=e.data}))},connectToNetwork:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,n,r,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.disabled=!0,e.next=3,ethereum.request({method:"eth_requestAccounts"});case 3:return a=e.sent,n=t.web3,e.next=7,n.eth.net.getId();case 7:if(r=e.sent,c=u.networks[r],1!=r){e.next=13;break}t.connectionMessage="connected to Ethereum Mainnet",e.next=25;break;case 13:if(4!=r){e.next=18;break}t.connectionMessage="connected to Rinkeby Test Network",t.contract=new n.eth.Contract(d,"0x253307D78eA869f60C32d1d2eeb6753aB6fb7643"),e.next=25;break;case 18:if(!c){e.next=23;break}t.connectionMessage="connected to local Ganache network",t.contract=new n.eth.Contract(u.abi,c.address),e.next=25;break;case 23:return t.connectionMessage="Please connect to a Rinkeby or Mainnet",e.abrupt("return");case 25:t.account=a[0];case 26:case"end":return e.stop()}}),e)})))()},mintNft:function(e,a){var r=this;return Object(n["a"])(regeneratorRuntime.mark((function n(){var c,o,u,d,f,h,l,m;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return c=r.contract.methods.mint,o=Object(i["create"])("https://ipfs.infura.io:5001"),u=s.a.utils.toWei(e.target.dataset.price,"ether"),d=new t.from(e.target.dataset.image,"base64"),n.next=6,o.add(d);case 6:return f=n.sent,h={},l={name:e.target.dataset.name,description:e.target.dataset.description,image:"https://ipfs.io/ipfs/"+f.path},JSON.parse(e.target.dataset.attributes).forEach((function(t){h[t.trait_type]=t.value})),l["attributes"]=h,n.next=13,o.add(JSON.stringify(l));case 13:return m=n.sent,n.next=16,c(m.path).send({from:r.account,value:parseInt(u)}).on("receipt",(function(t){r.metaData[a].itemData.txhash=t.transactionHash,r.setTxHash(r.metaData[a]._id,r.metaData[a].itemData.txhash)}));case 16:case"end":return n.stop()}}),n)})))()},setTxHash:function(t,e){return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:c.a.post("".concat(f,"setHash"),{id:t,txHash:e}).then((function(t){1===t.data.ok&&console.log("db updated with tx hash")}))["catch"]((function(t){console.error("FAILURE!!",t)}));case 1:case"end":return a.stop()}}),a)})))()}}}}).call(this,a("1c35").Buffer)}}]);
//# sourceMappingURL=drop.fd99eea4.js.map